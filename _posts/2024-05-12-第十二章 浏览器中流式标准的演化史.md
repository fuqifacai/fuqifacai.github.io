---
layout:       post
title:        "第十二章 浏览器中流式标准的演化史"
author:       "Ramendeus"
header-style: text
catalog:      true
tags:
    - 流式
    - WebRTC
    - Streaming
---

[访问 2img.ai 官网以获取更多AI/AIGC信息](https://2img.ai)
[访问 个人技术博客: fuqifai.github.io](https://fuqifai.github.io)

本文大部分配图使用微信小程序【字形绘梦】免费生成。
![](/img/小程序码.png)

AIGC技术讨论群
![](/img/RA群永久二维码.png)

WebRTC是标准，协议和JavaScript API的集合，两者的组合可实现浏览器（对等）之间的对等音频，视频和数据共享。无需依赖第三方插件或专有软件，而是将实时通信转变为任何Web应用程序都可以通过简单的JavaScript API加以利用的标准功能。

交付丰富，高质量的RTC应用程序，例如音频和视频电话会议以及对等数据交换，需要在浏览器中提供许多新功能：音频和视频处理功能，新的应用程序API，以及对六种新功能的支持。网络协议。值得庆幸的是，该浏览器将这种复杂性的大部分从三个主要API中抽象出来：

+   `MediaStream`：获取音频和视频流
+   `RTCPeerConnection`：音频和视频数据的通信
+   `RTCDataChannel`：任意应用程序数据的通信

它只需要十几行JavaScript代码，任何Web应用程序都可以通过对等数据传输实现丰富的电话会议体验。这就是WebRTC的承诺和力量！但是，列出的API只是冰山一角：信令，对等设备发现，连接协商，安全性以及新协议的整个层只是将它们整合在一起的一些组件。

不足为奇的是，支持WebRTC的体系结构和协议还决定了其性能特征：连接建立等待时间，协议开销和传递语义，仅举几例。实际上，与所有其他浏览器通信不同，WebRTC通过UDP传输其数据。但是，UDP只是一个起点。要使浏览器中的实时通信成为现实，它需要花费比原始UDP多得多的费用。让我们仔细看看。

最新的Chrome和Firefox浏览器为所有用户提供WebRTC支持！话虽这么说，WebRTC也在浏览器API级别以及传输和协议级别上都在积极构建中。

![第十二章 浏览器中流式标准的演化史](https://www.shxcj.com/wp-content/uploads/2024/09/image-602.png)

## WebRTC的标准和发展

在浏览器中启用实时通信是一项雄心勃勃的工作，并且可以说是自一开始以来Web平台最重要的新增功能之一。WebRTC脱离了熟悉的客户端到服务器的通信模型，这导致了浏览器中网络层的完全重新设计，并且带来了一个全新的媒体堆栈，这是实现高效，实时处理所必需的音频和视频。

结果，WebRTC体系结构由十几种不同的标准组成，涵盖了应用程序和浏览器API，以及使其工作所需的许多不同的协议和数据格式：

+   Web实时通信（WEBRTC）W3C工作组负责定义浏览器API。
+   Web浏览器中的实时通信（RTCWEB）是IETF工作组，负责定义协议，数据格式，安全性和所有其他必要方面，以实现浏览器中的对等通信。

WebRTC不是空白标准。尽管其主要目的是实现浏览器之间的实时通信，但其设计还使其可以与现有的通信系统集成：IP语音（VOIP），各种SIP客户端，甚至公共交换电话网（PSTN） ， 仅举几个。WebRTC标准没有定义任何特定的互操作性要求或API，但它们确实尝试在可能的情况下重用相同的概念和协议。

换句话说，WebRTC不仅要为浏览器带来实时通信，还要把所有的Web功能都带给电信世界——2012年的市场价值为4.7万亿美元！毫不奇怪，这是一项重大发展，许多现有的电信供应商，企业和初创公司正在密切关注这一发展。WebRTC不仅仅是另一个浏览器API。

WebRTC 在主流浏览器中的支持情况如下图所示，这些信息来自 **caniuse.com** 网站，提供了各个浏览器对 WebRTC 的兼容性概况：

![第十二章 浏览器中流式标准的演化史](https://www.shxcj.com/wp-content/uploads/2024/09/image-603.png)

兼容性注意事项：

移动端支持：大多数移动浏览器也支持 WebRTC。需要注意的是，在 iOS 设备上，Safari 浏览器的版本需大于 10.1。

旧版浏览器：一些老旧的浏览器或 WebView 组件可能不支持 WebRTC，建议在发布应用前进行全面的兼容性测试。

网络环境与隐私权限：不同浏览器对摄像头、麦克风等隐私权限的处理方式有所不同，用户授权和连接稳定性可能受此影响。

通过查看上图中的兼容性数据，我们可以更好地评估 WebRTC 在不同平台上的表现，优化应用以适配各种浏览器环境。

## WebRTC场景和性能

webRTC标准是为了应对下面各种场景挑战：

在线教育：如类似云课堂，通过WebRTC实现实时互动教学。

社交媒体：增强用户互动体验，如 视频聊天功能等。

视频会议：如提供高质量的实时视频会议体验。

直播平台：利用WebRTC技术进行低延迟的实时直播。

物联网（IoT）：提供了低延迟的音视频通信能力，可以用于物联网设备之间的实时视频监控。

实现低延迟，对等传输是一项不平凡的工程挑战：NAT遍历和连接性检查，信令，安全性，拥塞控制以及无数其他细节需要处理。WebRTC代表我们处理了以上所有内容，因此，自成立以来，WebRTC可以说是Web平台最重要的新增功能之一。实际上，这不仅是WebRTC提供的各个部分，而且所有组件都可以协同工作以提供一个简单而统一的API，以便在浏览器中构建对等应用程序这一事实。

但是，即使具有所有内置服务，设计高效且高性能的对等应用程序仍需要进行大量仔细的考虑和计划：对等并不意味着就其本身而言就具有高性能。如果有的话，对等点之间带宽和延迟的增加的可变性，以及媒体传输的高要求以及不可靠的传送的特殊性，使它成为一个更加艰巨的工程挑战。

